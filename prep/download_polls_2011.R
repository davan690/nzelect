url <- "https://en.wikipedia.org/wiki/Opinion_polling_for_the_New_Zealand_general_election,_2011"

polls <- url %>%
    read_html(encoding = "UTF-8") 

tabs <- polls %>%
    html_nodes("table") 

tab <- html_table(tabs[[1]], fill = TRUE) 

#View(tab)

tab <- tab[tab[ , 1] != tab[ , 2], 1:11]
tab <- tab[tab[ , 1] != "Poll", ]
names(tab)[2] <- "WikipediaDates"

tab$WikipediaDates

tab$StartDate <- as.Date(c("8/11/2008", "17/11/2008", "1/12/2008",
                           "2/1/2009", "19/1/2009", "2/2/2009",
                           "14/2/2009", "18/2/2009", "16/2/2009",
                           "2/3/2009", "28/3/2009", "23/3/2009",
                           "5/4/2009", "6/4/2009", "20/4/2009",
                           "4/5/2009", "18/5/2009", "1/6/2009",
                           "22/6/2009", "6/7/2009", "25/7/2009",
                           "20/7/2009", "3/8/2009", "17/8/2009",
                           "31/8/2009", "19/9/2009", "21/9/2009",
                           "18/10/2009", "5/10/2009", "19/10/2009",
                           "2/11/2009", "21/11/2009", "16/11/2009",
                           "13/12/2009", "30/11/2009", "4/1/2010",
                           "18/1/2010", "29/1/2010", "1/2/2010",
                           "16/2/2010", "14/2/2010", "15/2/2010",
                           "1/3/2010", "22/3/2010", "10/4/2010",
                           "25/4/2010", "5/4/2010", "3/5/2010",
                           "17/5/2010", "30/5/2010", "31/5/2010",
                           "21/6/2010", "5/7/2010", "19/7/2010",
                           "8/8/2010", "8/8/2010", "2/8/2010",
                           "16/8/2010", "30/8/2010", "20/9/2010",
                           "26/9/2010", "4/10/2010", "11/10/2010",
                           "18/10/2010", "1/11/2010", "15/11/2010",
                           "29/11/2010", "13/12/2010", "19/12/2010",
                           "30/12/2010", "4/1/2011", "17/1/2011",
                           "31/1/2011", "20/2/2011", "20/2/2011",
                           "14/2/2011", "28/2/2011", "21/3/2011",
                           "10/4/2011", "17/4/2011", "4/4/2011",
                           "18/4/2011", "2/5/2011", "19/5/2011",
                           "29/5/2011", "29/5/2011", "16/5/2011",
                           "30/5/2011", "13/6/2011", "27/6/2011",
                           "27/6/2011", "10/7/2011", "17/7/2011",
                           "11/7/2011", "21/7/2011", "30/7/2011",
                           "25/7/2011", "21/8/2011", "21/8/2011",
                           "19/8/2011", "15/8/2011", "25/8/2011",
                           "29/8/2011", "12/9/2011", "28/9/2011",
                           "2/10/2011", "2/10/2011", "26/9/2011",
                           "10/10/2011", "20/10/2011", "30/10/2011",
                           "27/10/2011", "28/10/2011", "3/11/2011",
                           "24/10/2011", "3/11/2011", "3/11/2011",
                           "10/11/2011", "13/11/2011", "10/11/2011",
                           "17/11/2011", "17/11/2011", "7/11/2011",
                           "17/11/2011", "17/11/2011", "24/11/2011",
                           "24/11/2011", "22/11/2011", "26/11/2011"),
                         format = "%d/%m/%Y")

tab$EndDate <- as.Date(c("8/11/2008", "30/11/2008", "14/12/2008",
                         "18/1/2009", "1/2/2009", "15/2/2009",
                         "19/2/2009", "18/2/2009", "1/3/2009",
                         "15/3/2009", "1/4/2009", "5/4/2009",
                         "5/4/2009", "19/4/2009", "3/5/2009",
                         "17/5/2009", "31/5/2009", "14/6/2009",
                         "5/7/2009", "19/7/2009", "29/7/2009",
                         "2/8/2009", "16/8/2009", "30/8/2009",
                         "13/9/2009", "24/9/2009", "4/10/2009",
                         "18/10/2009", "18/10/2009", "1/11/2009",
                         "15/11/2009", "25/11/2009", "29/11/2009",
                         "13/12/2009", "13/12/2009", "17/1/2010",
                         "31/1/2010", "10/2/2010", "14/2/2010",
                         "16/2/2010", "17/2/2010", "28/2/2010",
                         "14/3/2010", "4/4/2010", "14/4/2010",
                         "25/4/2010", "18/4/2010", "16/5/2010",
                         "30/5/2010", "30/5/2010", "13/6/2010",
                         "4/7/2010", "18/7/2010", "1/8/2010",
                         "8/8/2010", "8/8/2010", "15/8/2010",
                         "29/8/2010", "12/9/2010", "3/10/2010",
                         "26/9/2010", "17/10/2010", "11/10/2010",
                         "31/10/2010", "14/11/2010", "28/11/2010",
                         "12/12/2010", "13/12/2010", "19/12/2010",
                         "30/12/2010", "16/1/2011", "30/1/2011",
                         "13/2/2011", "20/2/2011", "20/2/2011",
                         "27/2/2011", "13/3/2011", "3/4/2011",
                         "10/4/2011", "17/4/2011", "17/4/2011",
                         "1/5/2011", "15/5/2011", "25/5/2011",
                         "29/5/2011", "29/5/2011", "29/5/2011",
                         "12/6/2011", "26/6/2011", "27/6/2011",
                         "10/7/2011", "10/7/2011", "17/7/2011",
                         "24/7/2011", "25/7/2011", "30/7/2011",
                         "7/8/2011", "21/8/2011", "21/8/2011",
                         "26/8/2011", "28/8/2011", "29/8/2011",
                         "11/9/2011", "25/9/2011", "28/9/2011",
                         "2/10/2011", "2/10/2011", "9/10/2011",
                         "23/10/2011", "27/10/2011", "30/10/2011",
                         "31/10/2011", "2/11/2011", "3/11/2011",
                         "6/11/2011", "7/11/2011", "9/11/2011",
                         "10/11/2011", "13/11/2011", "16/11/2011",
                         "17/11/2011", "17/11/2011", "18/11/2011",
                         "21/11/2011", "23/11/2011", "24/11/2011",
                         "24/11/2011", "24/11/2011", "26/11/2011"), 
                       format = "%d/%m/%Y")

polls2011 <- tab
