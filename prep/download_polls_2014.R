#=====================polls pre 2017 election===================================
url <- "https://en.wikipedia.org/wiki/Opinion_polling_for_the_New_Zealand_general_election,_2014"

polls <- url %>%
    read_html(encoding = "UTF-8") 

tabs <- polls %>%
    html_nodes("table") 

tab <- html_table(tabs[[1]], fill = TRUE) 

#View(tab)

tab <- tab[tab[ , 1] != tab[ , 2], 1:11]
tab <- tab[tab[ , 1] != "Poll", ]
names(tab)[2] <- "WikipediaDates"

tab$WikipediaDates

tab$StartDate <- as.Date(c("26/11/2011", "3/1/2012", "16/1/2012",
                           "30/1/2012", "19/2/2012", "13/2/2012",
                           "27/2/2012", "24/3/2012", "12/3/2012",
                           "2/4/2012", "22/4/2012", "19/4/2012",
                           "16/4/2012", "30/4/2012", "14/5/2012",
                           "26/6/2012", "28/5/2012", "10/6/2012",
                           "8/6/2012", "18/6/2012", "25/6/2012",
                           "9/7/2012", "19/7/2012", "28/7/2012",
                           "5/8/2012", "23/7/2012", "13/8/2012",
                           "20/8/2012", "27/8/2012", "15/9/2012",
                           "10/9/2012", "24/9/2012", "14/10/2012",
                           "8/10/2012", "27/10/2012", "29/10/2012",
                           "12/11/2012", "24/11/2012", "2/12/2012",
                           "28/11/2012", "26/11/2012", "2/1/2013",
                           "14/1/2013", "27/1/2013", "9/2/2013",
                           "10/2/2013", "24/2/2013", "11/2/2013",
                           "25/2/2013", "11/3/2013", "11/3/2013",
                           "1/4/2013", "13/4/2013", "14/4/2013",
                           "15/4/2013", "29/4/2013", "18/5/2013",
                           "17/5/2013", "19/5/2013", "13/5/2013",
                           "3/6/2013", "12/6/2013", "17/6/2013",
                           "1/7/2013", "9/7/2013", "15/7/2013",
                           "27/7/2013", "29/7/2013", "10/8/2013",
                           "12/8/2013", "26/8/2013", "14/9/2013",
                           "17/9/2013", "16/9/2013", "30/9/2013",
                           "19/10/2013", "19/10/2013", "14/10/2013",
                           "3/11/2013", "28/10/2013", "11/11/2013",
                           "25/11/2013", "9/12/2013", "6/1/2014",
                           "2/2/2014", "20/1/2014", "8/2/2014",
                           "3/2/2014", "15/2/2014", "17/2/2014",
                           "6/3/2014", "3/3/2014", "22/3/2014",
                           "30/3/2014", "17/3/2014", "31/3/2014",
                           "21/4/2014", "10/5/2014", "5/5/2014",
                           "17/5/2014", "25/5/2014", "19/5/2014",
                           "2/6/2014", "6/6/2014", "14/6/2014",
                           "19/6/2014", "21/6/2014", "14/6/2014",
                           "30/6/2014", "8/7/2014", "17/7/2014",
                           "10/7/2014", "19/7/2014", "14/7/2014",
                           "9/8/2014", "9/8/2014", "5/8/2014",
                           "4/8/2014", "14/8/2014", "19/8/2014",
                           "21/8/2014", "23/8/2014", "23/8/2014",
                           "18/8/2014", "26/8/2014", "28/8/2014",
                           "30/8/2014", "30/8/2014", "2/9/2014",
                           "4/9/2014", "6/9/2014", "6/9/2014",
                           "1/9/2014", "9/9/2014", "11/9/2014",
                           "3/9/2014", "13/9/2014", "20/9/2014"),
                         format = "%d/%m/%Y")

tab$EndDate <- as.Date(c("26/11/2011", "15/1/2012", "29/1/2012",
                         "12/2/2012", "19/2/2012", "26/2/2012",
                         "11/3/2012", "28/3/2012", "1/4/2012",
                         "15/4/2012", "22/4/2012", "29/4/2012",
                         "29/4/2012", "13/5/2012", "27/5/2012",
                         "30/6/2012", "7/6/2012", "10/6/2012",
                         "24/6/2012", "25/6/2012", "8/7/2012",
                         "22/7/2012", "23/7/2012", "1/8/2012",
                         "5/8/2012", "5/8/2012", "26/8/2012",
                         "31/8/2012", "9/9/2012", "19/9/2012",
                         "23/9/2012", "7/10/2012", "14/10/2012",
                         "24/10/2012", "31/10/2012", "11/11/2012",
                         "25/11/2012", "28/11/2012", "2/12/2012",
                         "3/12/2012", "9/12/2012", "14/1/2013",
                         "27/1/2013", "10/2/2013", "13/2/2013",
                         "14/2/2013", "24/2/2013", "24/2/2013",
                         "10/3/2013", "17/3/2013", "24/3/2013",
                         "14/4/2013", "18/4/2013", "18/4/2013",
                         "28/4/2013", "12/5/2013", "22/5/2013",
                         "23/5/2013", "23/5/2013", "26/5/2013",
                         "16/6/2013", "23/6/2013", "30/6/2013",
                         "14/7/2013", "14/7/2013", "28/7/2013",
                         "31/7/2013", "11/8/2013", "15/8/2013",
                         "25/8/2013", "8/9/2013", "18/9/2013",
                         "23/9/2013", "29/9/2013", "13/10/2013",
                         "23/10/2013", "23/10/2013", "27/10/2013",
                         "7/11/2013", "10/11/2013", "24/11/2013",
                         "8/12/2013", "17/12/2013", "19/1/2014",
                         "2/2/2014", "2/2/2014", "10/2/2014",
                         "16/2/2014", "19/2/2014", "2/3/2014",
                         "16/3/2014", "16/3/2014", "26/3/2014",
                         "30/3/2014", "30/3/2014", "14/4/2014",
                         "4/5/2014", "12/5/2014", "18/5/2014",
                         "21/5/2014", "25/5/2014", "1/6/2014",
                         "15/6/2014", "16/6/2014", "17/6/2014",
                         "25/6/2014", "25/6/2014", "29/6/2014",
                         "13/7/2014", "16/7/2014", "17/7/2014",
                         "17/7/2014", "23/7/2014", "27/7/2014",
                         "13/8/2014", "13/8/2014", "13/8/2014",
                         "17/8/2014", "20/8/2014", "25/8/2014",
                         "27/8/2014", "27/8/2014", "27/8/2014",
                         "31/8/2014", "1/9/2014", "3/9/2014",
                         "3/9/2014", "3/9/2014", "8/9/2014",
                         "10/9/2014", "10/9/2014", "10/9/2014",
                         "14/9/2014", "15/9/2014", "17/9/2014",
                         "17/9/2014", "17/9/2014", "20/9/2014"), 
                       format = "%d/%m/%Y")

polls2014 <- tab
