url <- "https://en.wikipedia.org/wiki/Opinion_polling_for_the_New_Zealand_general_election,_2008"

webpage <- url %>%
    read_html(encoding = "UTF-8") 

tabs <- webpage %>%
    html_nodes("table") 

tab <- html_table(tabs[[1]], fill = TRUE) 

#View(tab)

tab <- tab[tab[ , 1] != tab[ , 2], ]
tab <- tab[tab[ , 1] != "Poll", ]
names(tab)[2] <- "WikipediaDates"

tab$WikipediaDates

tab$StartDate <- as.Date(c("17/9/2005", "17/9/2005", "4/10/2005",
                           "18/10/2005", "27/10/2005", "20/11/2005",
                           "30/11/2005", "11/12/2005", "13/1/2006",
                           "16/1/2006", "26/1/2006", "19/2/2006",
                           "23/3/2006", "10/4/2006", "4/5/2006",
                           "22/5/2006", "29/6/2006", "16/7/2006",
                           "7/8/2006", "31/8/2006", "24/8/2006",
                           "28/8/2006", "22/9/2006", "18/9/2006",
                           "16/9/2006", "2/10/2006", "16/10/2006",
                           "16/10/2006", "26/10/2006", "30/10/2006",
                           "13/11/2006", "14/11/2006", "27/11/2006",
                           "3/1/2007", "25/1/2007", "23/1/2007",
                           "12/2/2007", "6/2/2007", "19/2/2007",
                           "5/3/2007", "17/3/2007", "22/3/2007",
                           "19/3/2007", "3/4/2007", "14/4/2007",
                           "23/4/2007", "3/5/2007", "7/5/2007",
                           "18/5/2007", "19/5/2007", "21/5/2007",
                           "4/6/2007", "4/6/2007", "18/6/2007",
                           "30/6/2007", "5/7/2007", "15/7/2007",
                           "2/7/2007", "5/7/2007", "16/7/2007",
                           "4/8/2007", "15/8/2007", "30/7/2007",
                           "20/8/2007", "30/8/2007", "15/9/2007",
                           "8/9/2007", "3/9/2007", "13/9/2007",
                           "29/9/2007", "17/9/2007", "6/10/2007",
                           "1/10/2007", "11/10/2007", "8/10/2007",
                           "15/10/2007", "29/10/2007", "8/11/2007",
                           "17/11/2007", "12/11/2007", "8/12/2007",
                           "8/12/2007", "26/11/2007", "3/1/2008",
                           "10/1/2008", "23/1/2008", "21/1/2008",
                           "9/2/2008", "4/2/2008", "13/2/2008",
                           "19/2/2008", "11/2/2008", "18/2/2008",
                           "8/3/2008", "3/3/2008", "6/3/2008",
                           "24/3/2008", "10/4/2008", "12/4/2008",
                           "7/4/2008", "9/4/2008", "5/4/2008",
                           "21/4/2008", "7/5/2008", "5/5/2008",
                           "5/5/2008", "23/5/2008", "24/5/2008",
                           "19/5/2008", "2/6/2008", "11/6/2008",
                           "14/6/2008", "6/6/2008", "16/6/2008",
                           "30/6/2008", "9/7/2008", "12/7/2008",
                           "16/7/2008", "27/7/2008", "14/7/2008",
                           "28/7/2008", "6/8/2008", "9/8/2008",
                           "14/8/2008", "18/8/2008", "3/8/2008",
                           "6/9/2008", "1/9/2008", "10/9/2008",
                           "15/9/2008", "18/9/2008", "27/9/2008",
                           "22/9/2008", "8/10/2008", "4/10/2008",
                           "8/10/2008", "11/10/2008", "21/10/2008",
                           "6/10/2008", "15/10/2008", "18/10/2008",
                           "4/11/2008", "1/11/2008", "29/10/2008",
                           "5/11/2008", "20/10/2008", "8/11/2008"),
                         format = "%d/%m/%Y")

tab$EndDate <- as.Date(c("17/9/2005", "2/10/2005", "16/10/2005",
                         "31/10/2005", "2/11/2005", "20/11/2005",
                         "30/11/2005", "11/12/2005", "23/1/2006",
                         "16/1/2006", "2/2/2006", "19/2/2006",
                         "29/3/2006", "10/4/2006", "10/5/2006",
                         "25/5/2006", "5/7/2006", "16/7/2006",
                         "10/8/2006", "31/8/2006", "30/8/2006",
                         "10/9/2006", "24/9/2006", "21/9/2006",
                         "1/10/2006", "15/10/2006", "19/10/2006",
                         "29/10/2006", "1/11/2006", "12/11/2006",
                         "26/11/2006", "2/12/2006", "12/12/2006",
                         "21/1/2007", "1/2/2007", "5/2/2007",
                         "15/2/2007", "18/2/2007", "4/3/2007",
                         "18/3/2007", "22/3/2007", "28/3/2007",
                         "2/4/2007", "16/4/2007", "19/4/2007",
                         "6/5/2007", "9/5/2007", "20/5/2007",
                         "24/5/2007", "24/5/2007", "3/6/2007",
                         "17/6/2007", "22/6/2007", "1/7/2007",
                         "5/7/2007", "11/7/2007", "15/7/2007",
                         "15/7/2007", "19/7/2007", "29/7/2007",
                         "9/8/2007", "15/8/2007", "12/8/2007",
                         "2/9/2007", "5/9/2007", "15/9/2007",
                         "13/9/2007", "16/9/2007", "19/9/2007",
                         "29/9/2007", "30/9/2007", "11/10/2007",
                         "14/10/2007", "15/10/2007", "28/10/2007",
                         "28/10/2007", "11/11/2007", "26/11/2007",
                         "17/11/2007", "25/11/2007", "13/12/2007",
                         "13/12/2007", "9/12/2007", "20/1/2008",
                         "24/1/2008", "30/1/2008", "3/2/2008",
                         "14/2/2008", "17/2/2008", "19/2/2008",
                         "26/2/2008", "28/2/2008", "2/3/2008",
                         "13/3/2008", "16/3/2008", "27/3/2008",
                         "6/4/2008", "16/4/2008", "17/4/2008",
                         "20/4/2008", "22/4/2008", "26/4/2008",
                         "4/5/2008", "13/5/2008", "18/5/2008",
                         "28/5/2008", "29/5/2008", "29/5/2008",
                         "1/6/2008", "15/6/2008", "17/6/2008",
                         "19/6/2008", "25/6/2008", "29/6/2008",
                         "13/7/2008", "15/7/2008", "17/7/2008",
                         "16/7/2008", "27/7/2008", "27/7/2008",
                         "10/8/2008", "12/8/2008", "14/8/2008",
                         "20/8/2008", "31/8/2008", "25/8/2008",
                         "11/9/2008", "14/9/2008", "16/9/2008",
                         "24/9/2008", "24/9/2008", "2/10/2008",
                         "5/10/2008", "8/10/2008", "9/10/2008",
                         "14/10/2008", "16/10/2008", "21/10/2008",
                         "19/10/2008", "22/10/2008", "23/10/2008",
                         "4/11/2008", "5/11/2008", "5/11/2008",
                         "5/11/2008", "2/11/2008", "8/11/2008"), 
                       format = "%d/%m/%Y")

polls2008 <- tab
